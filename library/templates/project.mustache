name: {{project_name}}
options:
  createIntermediateGroups: true
  xcodeVersion: 10.0
  usesTabs: false
  indentWidth: 4
  deploymentTarget:
    iOS: "{{deployment_target_ios}}"
    watchOS: "{{deployment_target_watch_os}}"
    tvOS: "{{deployment_target_tv_os}}"

targets:
  {{project_name}}-iOS:
    settings:
      base:
        PRODUCT_NAME: "{{project_name}}"
        INFOPLIST_FILE: Sources/Info-iOS.plist
        SWIFT_VERSION: "{{swift_version}}"
        SWIFT_SWIFT3_OBJC_INFERENCE: On
    type: framework
    platform: iOS
    postbuildScripts:
      - script: ". build-scripts/xcode/build_phases/swiftlint.sh Sources"
        name: Swiftlint
      - script: ". build-scripts/xcode/build_phases/copy_paste_detection.sh Sources"
        name: CopyPaste Detection
    sources:
      - path: Sources
        excludes:
          - "*.plist"
      - path: Sources/Classes
        buildPhase: sources
      - path: Sources/Enums
        buildPhase: sources
      - path: Sources/Extensions
        buildPhase: sources
      - path: Sources/Functions
        buildPhase: sources
      - path: Sources/Protocols
        buildPhase: sources
      - path: Sources/Structures
        buildPhase: sources
      - path: "Sources/{{project_name}}.h"
        buildPhase: headers
  {{project_name}}-iOS-Extension:
    settings:
      base:
        PRODUCT_NAME: "{{project_name}}"
        INFOPLIST_FILE: Sources/Info-iOS-Extension.plist
        SWIFT_VERSION: "{{swift_version}}"
        SWIFT_SWIFT3_OBJC_INFERENCE: On
        APPLICATION_EXTENSION_API_ONLY: On
    type: framework
    platform: iOS
    postbuildScripts:
      - script: ". build-scripts/xcode/build_phases/swiftlint.sh Sources"
        name: Swiftlint
      - script: ". build-scripts/xcode/build_phases/copy_paste_detection.sh Sources"
        name: CopyPaste Detection
    sources:
      - path: Sources
        excludes:
          - "*.plist"
      - path: Sources/Classes
        buildPhase: sources
      - path: Sources/Enums
        buildPhase: sources
      - path: Sources/Extensions
        buildPhase: sources
      - path: Sources/Functions
        buildPhase: sources
      - path: Sources/Protocols
        buildPhase: sources
      - path: Sources/Structures
        buildPhase: sources
      - path: "Sources/{{project_name}}.h"
        buildPhase: headers
  {{project_name}}-watchOS:
    settings:
      base:
        PRODUCT_NAME: "{{project_name}}"
        INFOPLIST_FILE: Sources/Info-watchOS.plist
        SWIFT_VERSION: "{{swift_version}}"
        SWIFT_SWIFT3_OBJC_INFERENCE: On
    type: framework
    platform: watchOS
    postbuildScripts:
      - script: ". build-scripts/xcode/build_phases/swiftlint.sh Sources"
        name: Swiftlint
      - script: ". build-scripts/xcode/build_phases/copy_paste_detection.sh Sources"
        name: CopyPaste Detection
    sources:
      - path: Sources
        excludes:
          - "*.plist"
      - path: Sources/Classes
        buildPhase: sources
      - path: Sources/Enums
        buildPhase: sources
      - path: Sources/Extensions
        buildPhase: sources
      - path: Sources/Functions
        buildPhase: sources
      - path: Sources/Protocols
        buildPhase: sources
      - path: Sources/Structures
        buildPhase: sources
      - path: "Sources/{{project_name}}.h"
        buildPhase: headers
  {{project_name}}-tvOS:
    settings:
      base:
        PRODUCT_NAME: "{{project_name}}"
        INFOPLIST_FILE: Sources/Info-tvOS.plist
        SWIFT_VERSION: "{{swift_version}}"
        SWIFT_SWIFT3_OBJC_INFERENCE: On
    type: framework
    platform: tvOS
    postbuildScripts:
      - script: ". build-scripts/xcode/build_phases/swiftlint.sh Sources"
        name: Swiftlint
      - script: ". build-scripts/xcode/build_phases/copy_paste_detection.sh Sources"
        name: CopyPaste Detection
    sources:
      - path: Sources
        excludes:
          - "*.plist"
      - path: Sources/Classes
        buildPhase: sources
      - path: Sources/Enums
        buildPhase: sources
      - path: Sources/Extensions
        buildPhase: sources
      - path: Sources/Functions
        buildPhase: sources
      - path: Sources/Protocols
        buildPhase: sources
      - path: Sources/Structures
        buildPhase: sources
      - path: "Sources/{{project_name}}.h"
        buildPhase: headers
